###############################################################################
# Mosquitto MQTT Broker Configuration Template (SAFE TO COMMIT)
#
# Copy to:
#   mosquitto.env
# Edit mosquitto.env locally with real values (do NOT commit mosquitto.env).
###############################################################################

###############################################################################
# NETWORK / LISTENERS
###############################################################################
MOSQ_LISTENER_PORT=8883
MOSQ_BIND_ADDRESS=0.0.0.0

###############################################################################
# MOSQUITTO CONFIG PATHS
###############################################################################
MOSQ_CONF_MAIN=/etc/mosquitto/mosquitto.conf
MOSQ_CONF_DIR=/etc/mosquitto/conf.d

###############################################################################
# TLS CERTS (Let's Encrypt layout recommended)
###############################################################################
MOSQ_TLS_DIR=/etc/mosquitto/tls
MOSQ_CA_FILE=/etc/letsencrypt/live/example.com/fullchain.pem
MOSQ_CERT_FILE=/etc/letsencrypt/live/example.com/fullchain.pem
MOSQ_KEY_FILE=/etc/letsencrypt/live/example.com/privkey.pem

###############################################################################
# AUTH (PASSWORD FILE)
###############################################################################
MOSQ_PASSWORD_FILE=/etc/mosquitto/passwd
MOSQ_ALLOW_ANONYMOUS=false

# Optionally create one initial user during install (you can add more later)
CREATE_MQTT_USER=true
MQTT_USERNAME=changeme
MQTT_PASSWORD=

###############################################################################
# ACL (RECOMMENDED)
###############################################################################
MOSQ_ENABLE_ACL=true
MOSQ_ACL_FILE=/etc/mosquitto/aclfile

###############################################################################
# LOGGING
###############################################################################
# Valid values: stdout, stderr, syslog, topic, file
# If MOSQ_LOG_DEST=file, MOSQ_LOG_FILE must be a full path.
MOSQ_LOG_DEST=file
MOSQ_LOG_FILE=/var/log/mosquitto/mosquitto.log

###############################################################################
# PERSISTENCE
###############################################################################
MOSQ_PERSISTENCE=true
MOSQ_PERSISTENCE_LOCATION=/var/lib/mosquitto/

###############################################################################
# FIREWALL (UFW)
###############################################################################
UFW_ALLOW=true
OPEN_PLAINTEXT_1883=false

###############################################################################
# OPTIONAL: MUTUAL TLS (ADVANCED)
###############################################################################
REQUIRE_CLIENT_CERT=false

###############################################################################
# LET'S ENCRYPT AUTOMATION
###############################################################################
LETSENCRYPT_ENABLE=true
LETSENCRYPT_DOMAIN=example.com
LETSENCRYPT_EMAIL=admin@example.com
LETSENCRYPT_STAGING=false
